<!DOCTYPE html>
<html lang="pt-br">
<title>Fazenda do Pica Pau Verde</title>

<head>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-text-geometry-component%40%5e0.5.1/dist/aframe-text-geometry-component.min.js"></script>
</head>

<body>

  <a-scene stats>
    <!---controles--->
    <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>


    <!---assets-->
    <a-assets timeout="10000">
      <!---GLTF models-->
      <a-asset-item id="saci_01" src="glb/saci_01.glb"></a-asset-item>
      <a-asset-item id="saci_02" src="glb/saci_02.glb"></a-asset-item>
      <a-asset-item id="curupira_01" src="glb/curupira_01.glb"></a-asset-item>
      <a-asset-item id="balde" src="glb/balde.glb"></a-asset-item>
      <a-asset-item id="barraco" src="glb/barraco.glb"></a-asset-item>
      <a-asset-item id="carrinho_de_mao" src="glb/carrinho_de_mao.glb"></a-asset-item>
      <a-asset-item id="carro_de_boi_01" src="glb/carro_de_boi_01.glb"></a-asset-item>
      <a-asset-item id="carro_de_boi_02" src="glb/carro_de_boi_02.glb"></a-asset-item>
      <a-asset-item id="casa_01" src="glb/casa_01.glb"></a-asset-item>
      <a-asset-item id="casa_02" src="glb/casa_02.glb"></a-asset-item>
      <a-asset-item id="cerca" src="glb/cerca.glb"></a-asset-item>
      <a-asset-item id="lenha" src="glb/lenha.glb"></a-asset-item>
      <a-asset-item id="machado" src="glb/machado.glb"></a-asset-item>
      <a-asset-item id="pa_01" src="glb/pa_01.glb"></a-asset-item>
      <a-asset-item id="pa_02" src="glb/pa_02.glb"></a-asset-item>

      <!--media-->
      <img id="crate_texture" src="media/crate.jpg">
      <audio id="musica_tema" src="media/picapau_reggae.mp3"></audio>

      <!---point&click mixins-->
      <a-mixin id="point"
        animation__mouseenter="property: emissive; from: #000; to: #222; dur: 50; startEvents: mouseenter;"
        animation__mouseleave="property: emissive; from: #222; to: #000; dur: 100; startEvents: mouseleave;"
        animation__click_01=""
        animation__click_02="">
      </a-mixin>

      <a-mixin id="explode"
      animation__mouseclick="property: visible; to: false; startEvents: click;"></a-mixin>

      <!--crate example-->
      <a-mixin geometry="primitive: box" id="crate" material="src: #crate_texture; roughness: 0.9;"> </a-mixin>

    </a-assets>

    <!--objetos-->

    <a-entity position="-5 4 -5" material="color: brown;"
      text-geometry="value: Fazenda do; size: 1.2; height: 0.08; bevelEnabled: true; bevelSize: 0.05; bevelThickness: 0.1; curveSegments: 4; font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json">
    </a-entity>

    <a-entity position="-5 3 -5" material="color: green;" text-geometry="value: pica-pau verde; size: 0.8;">
    </a-entity>
    
    <a-sphere
      sound="src: #musica_tema; on: click; loop: true;" position="-6.5 4 -5" radius="1.25"
      src="media/song.jpg" repeat= "2 2"
      animation__rotate="property: rotation; to: 0 360 0; dur: 20000; loop: true;"
      animation__mouseenter="property: radius; to: 1.0; dur: 2600; easing:easeInOutElastic; startEvents: mouseenter;"
      animation__mouseleave_1="property: radius; to: 0.5; dur: 100; startEvents: mouseleave;"
      animation__mouseleave_2="property: radius; from: 0.5; to: 1.25; delay: 150; dur: 900; startEvents: mouseleave;">
    </a-sphere>

    <a-entity mixin="crate point explode" position="3.1 0.5 -3.3" rotation="0 12 0"></a-entity>
    <a-entity mixin="crate point explode" position="4.4 0.5 -2.2" rotation="0 71 0"></a-entity>
    <a-entity mixin="crate point explode" position="5 0.5 4" rotation="0 45 0"></a-entity>
    <a-entity mixin="crate point explode" position="2 0.5 -3" rotation="0 45 0"></a-entity>
    <a-entity mixin="crate point explode" position="6.1 0.5 4" rotation="0 12 0"></a-entity>

    <a-cylinder
    position="-6.5 0.75 -3" radius="0.5" height="12" color="#A0522D" roughness="1">
    <a-icosahedron position="0 9 0" radius="5" src="media/leaf.jpg" repeat="10 10" roughness="0.2"> </a-icosahedron>
    </a-cylinder>

    <!--cenario-->
    
    <a-circle
    position="0 0.01 -4" rotation="-90 0 0" radius="2"
    color="green"
    ></a-circle>

    <a-plane
    position="0 0 0" rotation="-90 0 0" width="100" height="100"
    roughness="0.9"
    ambient-occlusion-map="media/mud_AO.jpg"
    displacementMap="media/mud_DIS.jpg"
    displacementeBias="0"
    normal-texture-offset="1 1"
    normal-map="media/mud_NOR.jpg"
    repeat="30 30"
    src="media/mud_DIF.jpg"
    ></a-plane>

    <a-plane
    position="0 5 50" rotation="0 0 0" width="100" height="10"
    roughness="1"
    repeat="8 1"
    side="double"
    material="shader: flat; src: media/forest.jpg"
    ></a-plane>

    <a-plane
    position="0 5 -50" rotation="0 0 0" width="100" height="10"
    roughness="1"
    repeat="8 1"
    side="double"
    material="shader: flat; src: media/forest.jpg"
    ></a-plane>

    <a-plane
    position="50 5 0" rotation="0 90 0" width="100" height="10"
    roughness="1"
    repeat="8 1"
    side="double"
    material="shader: flat; src: media/forest.jpg"
    ></a-plane>

    <a-plane
    position="-50 5 0" rotation="0 90 0" width="100" height="10"
    roughness="1"
    repeat="8 1"
    side="double"
    material="shader: flat; src: media/forest.jpg"
    ></a-plane>



    <a-entity
      gltf-model="#saci_01" position="-2 0 -5" rotation="0 0 0" scale="0.15 0.15 0.15"
      animation__1="property: position; from: -2 0 -5; to: -2 1 -5; loop: true; dur: 900; easing:easeInOutElastic;"
      animation__2="property: rotation; to: 0 360 0; dur: 9900; loop: true;">
    </a-entity>

    <a-entity gltf-model="#saci_02" position="0 0 -5" rotation="0 0 0" scale="0.1 0.1 0.1"
      animation__mouseclick="property: rotation; from: 0 0 0; to: 0 360 0; dur: 1200; easing:easeInOutElastic; startEvents: click;"
      animation__mouseenter="property: scale; from: 0.1 0.1 0.1; to: 0.11 0.09 0.11; dur: 300; easing:easeInOutElastic; startEvents: mouseenter;"
      animation__mouseleave="property: scale; from: 0.11 0.09 0.11; to: 0.1 0.1 0.1; delay: 50; dur: 100; easing:easeInOutElastic; startEvents: mouseleave;"
      modify-materials
      ></a-entity>

    <a-entity gltf-model="#curupira_01" position="-5 0 -5" rotation="0 60 0" scale="0.35 0.35 0.35"></a-entity>

    <a-entity gltf-model="#balde" position="-2 0 -2.8" rotation="0 0 0" scale="1 1 1"></a-entity>

    <a-entity gltf-model="#barraco" position="2 0 -8" rotation="0 60 0" scale="1.3 1.4 1.3"></a-entity>

    <a-entity gltf-model="#carrinho_de_mao"
      position="-8 0 8.5" rotation="0 110 0" scale="3.1 3.1 3.1"
      animation__mouseclick_1="property: rotation; from: 0 110 0; to: 0 90 0; dur: 500; easing:easeInOutElastic; startEvents: click;"
      animation__mouseclick_2="property: position; from: -8 0 8.5; to: 8 0 8.5; delay: 500; dur: 1200; startEvents: click;">
    </a-entity>

    <a-entity gltf-model="#carro_de_boi_01" position="3 0 3" rotation="0 60 0" scale="1 1 1"></a-entity>

    <a-entity gltf-model="#carro_de_boi_02" position="8 0 4" rotation="0 50 0" scale="3.3 3.3 3.3"></a-entity>

    <a-entity gltf-model="#cerca" position="-7.8 0 -3" rotation="0 60 0" scale="1 1 1"></a-entity>

    <a-entity gltf-model="#casa_01" position="-12 0 5" rotation="0 270 0" scale="2.5 2.5 2.5" spherical-env-map="media/sky.jpg"></a-entity>

    <a-entity gltf-model="#lenha" position="5 0.2 -5.5" rotation="0 50 0" scale="0.16 0.16 0.16"></a-entity>

    <a-entity gltf-model="#machado" position="4.5 1 -5.5" rotation="270 60 180" scale="3 3 3"></a-entity>

    <a-sky src="media/ceu.jpg" animation="property: rotation; to: 0 -360 0; loop: true; dur: 200000;"></a-sky>
  
    <script>
    
    AFRAME.registerComponent('modify-materials', {
      init: function () {
        // Wait for model to load.
        this.el.addEventListener('model-loaded', () => {
          // Grab the mesh / scene.
          const obj = this.el.getObject3D('mesh');
          // Go over the submeshes and modify materials we want.
          obj.traverse(node => {
            if (node.name.indexOf('roupa') !== -1) {
              node.material.color.set('yellow');
            }
          });
        });
      }
    });
    
  </script>
  
  </a-scene>
</body>

</html>